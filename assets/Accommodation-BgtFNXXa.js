import{u as N,x as y,w as v,r as i,j as e,m as f,B as C}from"./index-BbDgdMef.js";import{B as S}from"./button-DSIJFCHW.js";import{L as l,I as d}from"./label-RL2mR4kJ.js";import{S as k,a as F,b as B,c as T,d as X}from"./select-DRB7JgE0.js";import{C as w,b as A,c as D,a as I}from"./card-IuV4J6Io.js";import"./index-AHhMRBTy.js";import"./chevron-up-xA4MZOIw.js";const V=()=>{const{user:o}=N(),p=y(),{toast:m}=v(),[s,u]=i.useState({fullName:"",email:"",phone:"",days:"",utr:""}),[c,g]=i.useState(0),[h,x]=i.useState(!1);i.useEffect(()=>{o?.email&&u(t=>({...t,email:o.email}))},[o]);const n=(t,a)=>{if(u(r=>({...r,[t]:a})),t==="days"){const r=parseInt(a)||0;g(r*100)}},j=()=>["fullName","email","phone","days","utr"].filter(r=>!s[r]).length>0?(m({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"}),!1):!0,b=async t=>{if(t.preventDefault(),!!j()){x(!0);try{const{error:a}=await C.from("accommodation").insert([{user_id:o.id,fullName:s.fullName,email:s.email,phone:s.phone,days:s.days,total_cost:c,utr:s.utr}]);if(a)throw a;m({title:"Accommodation Booked!",description:`Your accommodation for ${s.days} days has been booked. Total cost: ₹${c}.`}),p("/")}catch(a){console.error(a),m({title:"Booking Failed",description:a.message||"Please try again later.",variant:"destructive"})}finally{x(!1)}}};return e.jsx(f.div,{className:"min-h-screen bg-background py-20",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(f.div,{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Accommodation Booking"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Book your stay for the event. Each day costs ₹100."})]}),e.jsxs(w,{className:"glass-card border border-white/10",children:[e.jsx(A,{children:e.jsx(D,{className:"text-2xl font-semibold",children:"Accommodation Details"})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(d,{id:"fullName",value:s.fullName,onChange:t=>n("fullName",t.target.value),placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email *"}),e.jsx(d,{id:"email",value:s.email,readOnly:!0,className:"bg-muted cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(d,{id:"phone",value:s.phone,onChange:t=>n("phone",t.target.value),placeholder:"+91 XXXXX XXXXX",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"days",children:"Number of Days *"}),e.jsxs(k,{value:s.days,onValueChange:t=>n("days",t),children:[e.jsx(F,{children:e.jsx(B,{placeholder:"Select number of days"})}),e.jsx(T,{children:[...Array(7).keys()].map(t=>e.jsxs(X,{value:(t+1).toString(),className:"px-4 py-2 text-sm hover:bg-primary/10 rounded-md",children:[t+1," ",t+1===1?"Day":"Days"]},t+1))})]}),s.days&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Total Cost: ₹",c]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"utr",children:"UTR (Transaction Reference) *"}),e.jsx(d,{id:"utr",value:s.utr,onChange:t=>n("utr",t.target.value),placeholder:"Enter UTR number",required:!0})]}),e.jsxs("div",{className:"border-t border-border pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Bank Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please deposit the total amount to the following bank account:"}),e.jsxs("ul",{className:"text-sm mt-2",children:[e.jsx("li",{children:"Bank Name: Quantum Bank"}),e.jsx("li",{children:"Account Number: 1234567890"}),e.jsx("li",{children:"IFSC Code: QBANK0001234"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'After depositing, enter the UTR number and click "Continue" to complete your booking.'})]}),e.jsx(S,{type:"submit",className:"w-full btn-quantum py-3 text-lg font-semibold rounded-lg shadow-lg",disabled:h,children:h?"Booking...":"Continue"})]})})]})]})})})};export{V as default};
